<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>bash on 还是偶尔想要伟大</title><link>https://y7ut.github.io/zh/tags/bash/</link><description>Recent content in bash on 还是偶尔想要伟大</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Mon, 29 Aug 2022 12:14:34 +0800</lastBuildDate><atom:link href="https://y7ut.github.io/zh/tags/bash/index.xml" rel="self" type="application/rss+xml"/><item><title>如何设计容器的 Entrypoint 🚪</title><link>https://y7ut.github.io/zh/blog/zh/learn-design-image-entrypoint/</link><pubDate>Mon, 29 Aug 2022 12:14:34 +0800</pubDate><guid>https://y7ut.github.io/zh/blog/zh/learn-design-image-entrypoint/</guid><description>在整理php-fpm官方镜像构架方法的时候，注意到了一个入口文件 docker-php-entrypoint， 和 DockerFile 的写法
ENTRYPOINT [&amp;#34;docker-php-entrypoint&amp;#34;] CMD [&amp;#34;php-fpm&amp;#34;] 为什么要要这样设计呢，入口文件的好处是什么的呢？
🤔️我们来研究一下，先看一下这个 docker-php-entrypoint 文件
#!/bin/sh set -e # first arg is `-f` or `--some-option` if [ &amp;#34;${1#-}&amp;#34; != &amp;#34;$1&amp;#34; ]; then set -- php-fpm &amp;#34;$@&amp;#34; fi exec &amp;#34;$@&amp;#34; bash脚本中的set指令 从上到下看，先看一下文件开头的set -e
最常用的两个参数就是 -e 与 -x ，一般写在 bash 脚本的代码逻辑之前，这两个组合在一起用，可以在 Debug 的时候替你节省许多时间 。
set -x 会在执行每一行 shell时，把执行的内容输出来。它可以让你看到当前执行的情况，里面涉及的变量也会被替换成实际的值。 set -v 会在执行每一行 shell时，把执行的内容输出来, 但里面涉及的变量不会被替换。 set -e 会在执行出错时结束程序，就像其他语言中的“抛出异常”一样。 set -u 会在执行 shell时, 如果遇到不存在的变量会忽略掉这个问题 例如
#!/bin/bash # 打印每一行语句的执行情况，执行错误时，则立即退出脚本 # set [-可选参数] [-o 选项] set -ex 当然还有一些参数需要携带option， 也是常用的设置，例如:</description></item></channel></rss>